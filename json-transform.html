<link rel="import" href="../polymer/polymer.html">

<!--
A Polymer Element that transforms a JSON object into another JSON object using a transform function.

### Example
```html
<json-transform
  data-in="[[data]]"
  data-out="{{newData}}"
  transform-function="[[transform]]">
</json-transform>
```

@demo demo/index.html
-->

<script>
  (function() {
    Polymer({
      is: 'json-transform',

      properties: {
        /**
         * (Required)
         *
         * A JSON object.
         *
         * @type {Object}
         */
        dataIn: {
          type: Object
        },

        /**
         * (Output)
         *
         * The new JSON object.
         *
         * @type {Object}
         */
        dataOut: {
          type: Object,
          notify: true,
          readOnly: true
        },

        /**
         * (Required)
         *
         * A function that has the following signature:
         * function (jsondata) { return transformed-jsondata; }
         *
         * @type {Object}
         */
        transformFunction : {
          type: Object
        }
      },

      observers: [
        '_applyTransform(dataIn, transformFunction)'
      ],

      /**
       * Sets the output data object by applying the transform function to the input data object.
       *
       * @private
       */
      _applyTransform: function() {
        this._setDataOut(this.transformFunction(this.dataIn));
      }

    });
  })();

</script>
